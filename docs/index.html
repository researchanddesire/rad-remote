<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ossm-remote Firmware Versions</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-50 text-gray-900 min-h-screen">
    <div class="max-w-xl mx-auto mt-12 bg-white rounded-xl shadow-md p-8">
      <h1 class="text-3xl font-bold mb-2">ossm-remote Firmware Versions</h1>
      <div class="text-gray-500 text-lg mb-8">
        Versions for the  ossm-remote by Research and Desire
      </div>

      <section class="mb-8">
        <h2 class="text-xl font-semibold text-blue-800 mb-2">Production</h2>
        <a
          href="/ossm-remote/production/version.json"
          class="text-blue-600 hover:underline mr-6"
          >version.json</a
        >
        <a
          href="/ossm-remote/production/firmware.bin"
          class="text-blue-600 hover:underline"
          >firmware.bin</a
        >
      </section>

      <section class="mb-8">
        <h2 class="text-xl font-semibold text-blue-800 mb-2">
          Alpha (Release Candidate)
        </h2>
        <a
          href="/ossm-remote/alpha/version.json"
          class="text-blue-600 hover:underline mr-6"
          >version.json</a
        >
        <a
          href="/ossm-remote/alpha/firmware.bin"
          class="text-blue-600 hover:underline"
          >firmware.bin</a
        >
      </section>

      <section class="mb-8">
        <h2 class="text-xl font-semibold text-blue-800 mb-2">
          Latest Development Code (unstable)
        </h2>
        <a
          href="/ossm-remote/v/latest/version.json"
          class="text-blue-600 hover:underline mr-6"
          >version.json</a
        >
        <a
          href="/ossm-remote/v/latest/firmware.bin"
          class="text-blue-600 hover:underline"
          >firmware.bin</a
        >
      </section>

      <!-- START_OF_VERSIONS -->
      <details class="mt-6">
        <summary class="cursor-pointer text-lg font-medium text-gray-700">
          All Versions
        </summary>
        <ul id="all-versions-list" class="list-disc pl-6 mt-2">
          <!-- Version links will be injected here by JS -->
        </ul>
      </details>
      <!-- END_OF_VERSIONS -->
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const list = document.getElementById("all-versions-list");
        fetch("./all-versions.json")
          .then((response) => {
            if (!response.ok) throw new Error("Failed to fetch versions");
            return response.json();
          })
          .then((data) => {
            list.innerHTML = "";
            data.forEach((ver) => {
              // version.json link
              const liVersion = document.createElement("li");
              liVersion.className = "mb-1";
              const aVersion = document.createElement("a");
              aVersion.href = ver.url;
              aVersion.className = "text-blue-600 hover:underline";
              aVersion.textContent = `v/${ver.version}/version.json`;
              liVersion.appendChild(aVersion);
              list.appendChild(liVersion);
              // firmware.bin link
              const liFirmware = document.createElement("li");
              liFirmware.className = "mb-1";
              const aFirmware = document.createElement("a");
              aFirmware.href = ver.firmware;
              aFirmware.className = "text-blue-600 hover:underline";
              aFirmware.textContent = `v/${ver.version}/firmware.bin`;
              liFirmware.appendChild(aFirmware);
              list.appendChild(liFirmware);
            });
          })
          .catch((err) => {
            list.innerHTML =
              '<li class="text-red-600">Failed to load versions.</li>';
          });
      });
    </script>
  </body>
</html>
